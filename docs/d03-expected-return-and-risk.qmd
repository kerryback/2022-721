---
title:  "Portfolios: Expected Return and Risk"
author: <br>Kerry Back<br><br>BUSI 721, Fall 2022<br>JGSB, Rice University
output-dir: docs
execute:
  echo: false
  jupyter: python3
format: 
  revealjs:
    highlight-style: monokai
    code-fold: true
    slide-number: true
    preview-links: true
    self-contained: true
    transition: fade
    theme: [solarized, 721.scss]
    incremental: true
---

## Review of Diversification

Portfolio mean is weighted average of asset means


Portfolio std dev < weighted average of asset std devs


## 3A

<p align=center> 
<a href="https://bbcx-investments.com/assets/"><img src="images/Rice_Owl.jpg" alt="HTML tutorial" style="width:4in;"></a>
</p>

## Calculating Portfolio Variance

$\sum_{i=1}^n w_{i}^2var(r_i)+2\sum_{i=1}^n\sum_{j=i+1}^n w_{i}w_{j}cov(r_{i},r_{j})$ 

. . .

Let C = covariance matrix, w = vector of weights.

Portfolio variance is $w^{‚ä§}Cw$.

. . .

Can calculate covariance matrix as *SRS* where *S* is diagonal matrix containing std devs and *R* is correlation matrix. 


# 

``` p
import numpy as np

# standard deviations
sds = np.array([0.20, 0.12, 0.15])
S = np.diag(sds)

# correlations
r12 = 0.4
r13 = 0.2
r23 = 0.3

R = np.identity(3)
R[0, 1] = R[1, 0] = r12
R[0, 2] = R[2, 0] = r13
R[1, 2] = R[2, 1] = r23

# covariance matrix
C = S @ R @ S

# portfolio
w = np.array(0.25, 0.25, 0.5)

# portfolio std dev
np.sqrt(w @ C @ w)
```


## 3B 

<p align=center> 
<a href="https://bbcx-investments.com/assets/"><img src="images/Rice_Owl.jpg" alt="HTML tutorial" style="width:4in;"></a>
</p>


## Risk-Free Saving

Suppose asset B is risk free. Set $r_{f}=r_{B}$.  

<p align=center> <img src="images/risk-6771847_1280.png" height=150 width=300></p>

. . .

Then, 
$\small var(r_{p})=w_{A}^2var(r_{A})$ and 
$\small stdev(r_{p})=w_{A}stdev(r_{A})$

$$\small \bar{r}_p=w_{A}\bar{r}_{A}+(1-w_{A})r_{f}=r_{f}+w_{A}(\bar{r}_{A}-r_{f})$$

Portfolio risk premium is:
$$\small \bar{r}_p-r_{f}=w_{A}(\bar{r}_{A}-r_{f})$$

. . .

So both risk and risk premium scale with allocation to risky asset.

## Sharpe Ratio

The Sharpe ratio is the ratio of **risk premium to risk:**

$$\frac{\bar{r}-r_{f}}{\sigma}$$

When combining a risk-free asset with a risky asset, the Sharpe ratio is invariant to the risky asset allocation.

The Sharpe ratio of the **portfolio** is the Sharpe ratio of the **risky asset**.

## Buying on Margin (Leverage)

Continuing with asset B = risk-free, we could take $w_{A}>1$, meaning that $w_{A}-1$ is borrowed. 

**Same formulas apply:**

:::: {.columns}
::: {.column width="100%"}
- risk premium is $w_{A}$ times A's risk premium,
- st dev is $w_{A}$ times A's std dev. 
:::
::::

. . .

Borrowing rate will be higher than saving rate.


## 3F

<p align=center> 
<a href="https://bbcx-investments.com/assets/"><img src="images/Rice_Owl.jpg" alt="HTML tutorial" style="width:4in;"></a>
</p>

## Borrowing or Saving with More Assets

$n$ risky assets. Allocation to risk-free asset is $1-\sum_{i=1}^n w_{i}$.

. . .

Portfolio return is:

$$r_{p}=\sum_{i=1}^n w_{i}r_{i}+(1- \sum_{i=1}^n w_{i})r_{f}=r_{f}+\sum_{i=1}^n w_{i}(r_{i}-r_{f})$$

. . .

So, risk premium is weighted average of asset risk premia.

